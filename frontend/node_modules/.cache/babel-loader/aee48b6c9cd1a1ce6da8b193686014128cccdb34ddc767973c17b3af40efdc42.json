{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Siva Prakash\\\\Desktop\\\\reactsqlotp\\\\frontend\\\\bus-ticket-booking\\\\src\\\\components\\\\BookingConfirmation.js\",\n  _s = $RefreshSig$();\n// src/components/BookingConfirmation.js\nimport React, { useEffect, useContext, useState, useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { UserContext } from '../contexts/UserContext';\nimport sendEmail from '../utils/sendEmail';\nimport './BookingConfirmation.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingConfirmation = () => {\n  _s();\n  var _location$state;\n  const location = useLocation();\n  const {\n    userEmail\n  } = useContext(UserContext);\n  const totalAmount = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.totalAmount) || 0;\n  const selectedSeats = useMemo(() => {\n    var _location$state2;\n    return ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.selectedSeats) || [];\n  }, [location.state]);\n  const [emailStatus, setEmailStatus] = useState(null);\n  useEffect(() => {\n    if (userEmail) {\n      const subject = 'Your Booking Confirmation';\n      const message = `Your booking is confirmed for seats: ${selectedSeats.join(', ')}. Total Amount: Rs.${totalAmount}`;\n      sendEmail(userEmail, subject, message).then(() => {\n        setEmailStatus('Email sent successfully!');\n      }).catch(error => {\n        setEmailStatus(`Failed to send email: ${error.text}`);\n      });\n    }\n  }, [userEmail, selectedSeats, totalAmount]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking-confirmation\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Yay!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Your Seats are booked\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Enjoy your upcoming journey!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), emailStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: emailStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingConfirmation, \"rYkFsg2jmueuHOag6fGwlh9aoh8=\", false, function () {\n  return [useLocation];\n});\n_c = BookingConfirmation;\nexport default BookingConfirmation;\nvar _c;\n$RefreshReg$(_c, \"BookingConfirmation\");","map":{"version":3,"names":["React","useEffect","useContext","useState","useMemo","useLocation","UserContext","sendEmail","jsxDEV","_jsxDEV","BookingConfirmation","_s","_location$state","location","userEmail","totalAmount","state","selectedSeats","_location$state2","emailStatus","setEmailStatus","subject","message","join","then","catch","error","text","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Siva Prakash/Desktop/reactsqlotp/frontend/bus-ticket-booking/src/components/BookingConfirmation.js"],"sourcesContent":["// src/components/BookingConfirmation.js\r\nimport React, { useEffect, useContext, useState, useMemo } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport sendEmail from '../utils/sendEmail';\r\nimport './BookingConfirmation.css';\r\n\r\nconst BookingConfirmation = () => {\r\n  const location = useLocation();\r\n  const { userEmail } = useContext(UserContext);\r\n  const totalAmount = location.state?.totalAmount || 0;\r\n  const selectedSeats = useMemo(() => location.state?.selectedSeats || [], [location.state]);\r\n  const [emailStatus, setEmailStatus] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (userEmail) {\r\n      const subject = 'Your Booking Confirmation';\r\n      const message = `Your booking is confirmed for seats: ${selectedSeats.join(', ')}. Total Amount: Rs.${totalAmount}`;\r\n\r\n      sendEmail(userEmail, subject, message)\r\n        .then(() => {\r\n          setEmailStatus('Email sent successfully!');\r\n        })\r\n        .catch((error) => {\r\n          setEmailStatus(`Failed to send email: ${error.text}`);\r\n        });\r\n    }\r\n  }, [userEmail, selectedSeats, totalAmount]);\r\n\r\n  return (\r\n    <div className=\"booking-confirmation\">\r\n      <div className=\"message-box\">\r\n        <h1>Yay!</h1>\r\n        <p>Your Seats are booked</p>\r\n        <p>Enjoy your upcoming journey!</p>\r\n        {emailStatus && <p>{emailStatus}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingConfirmation;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AACvE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAO,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,eAAA;EAChC,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAES;EAAU,CAAC,GAAGZ,UAAU,CAACI,WAAW,CAAC;EAC7C,MAAMS,WAAW,GAAG,EAAAH,eAAA,GAAAC,QAAQ,CAACG,KAAK,cAAAJ,eAAA,uBAAdA,eAAA,CAAgBG,WAAW,KAAI,CAAC;EACpD,MAAME,aAAa,GAAGb,OAAO,CAAC;IAAA,IAAAc,gBAAA;IAAA,OAAM,EAAAA,gBAAA,GAAAL,QAAQ,CAACG,KAAK,cAAAE,gBAAA,uBAAdA,gBAAA,CAAgBD,aAAa,KAAI,EAAE;EAAA,GAAE,CAACJ,QAAQ,CAACG,KAAK,CAAC,CAAC;EAC1F,MAAM,CAACG,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAEpDF,SAAS,CAAC,MAAM;IACd,IAAIa,SAAS,EAAE;MACb,MAAMO,OAAO,GAAG,2BAA2B;MAC3C,MAAMC,OAAO,GAAG,wCAAwCL,aAAa,CAACM,IAAI,CAAC,IAAI,CAAC,sBAAsBR,WAAW,EAAE;MAEnHR,SAAS,CAACO,SAAS,EAAEO,OAAO,EAAEC,OAAO,CAAC,CACnCE,IAAI,CAAC,MAAM;QACVJ,cAAc,CAAC,0BAA0B,CAAC;MAC5C,CAAC,CAAC,CACDK,KAAK,CAAEC,KAAK,IAAK;QAChBN,cAAc,CAAC,yBAAyBM,KAAK,CAACC,IAAI,EAAE,CAAC;MACvD,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACb,SAAS,EAAEG,aAAa,EAAEF,WAAW,CAAC,CAAC;EAE3C,oBACEN,OAAA;IAAKmB,SAAS,EAAC,sBAAsB;IAAAC,QAAA,eACnCpB,OAAA;MAAKmB,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BpB,OAAA;QAAAoB,QAAA,EAAI;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACbxB,OAAA;QAAAoB,QAAA,EAAG;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC5BxB,OAAA;QAAAoB,QAAA,EAAG;MAA4B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,EAClCd,WAAW,iBAAIV,OAAA;QAAAoB,QAAA,EAAIV;MAAW;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACtB,EAAA,CAhCID,mBAAmB;EAAA,QACNL,WAAW;AAAA;AAAA6B,EAAA,GADxBxB,mBAAmB;AAkCzB,eAAeA,mBAAmB;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}